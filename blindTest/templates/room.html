{{define "title"}}Salle{{end}}
{{template "layout.html" .}}
{{define "content"}}
<section class="card">
  <h2>Salle {{.Room.Code}}</h2>
  <p><strong>Playlist:</strong> {{.Room.Settings.Playlist}}</p>
  <p><strong>Temps de r√©ponse:</strong> {{.Room.Settings.ResponseTime}}s</p>
  <p><strong>Manches:</strong> {{.Room.Settings.MaxRounds}}</p>

  <h3>Joueurs</h3>
  <ul>
    {{range $uid, $p := .Room.Players}}<li>{{$p.Pseudo}}</li>{{end}}
  </ul>

  {{if .InRoom}}
    {{if not .Room.InProgress}}
      <form action="/rooms/start/{{.Room.Code}}" method="post">
        <button type="submit">Commencer la partie</button>
      </form>
    {{end}}
  {{else}}
    <form action="/rooms/join" method="post">
      <input type="hidden" name="code" value="{{.Room.Code}}" />
      <button type="submit">Rejoindre cette salle</button>
    </form>
  {{end}}
</section>

<section id="game" class="card">
  <audio id="preview" preload="none" controls></audio>

  <form id="guessForm" class="inline">
    <input id="guessInput" type="text" placeholder="Titre de la chanson" />
    <button type="submit">Envoyer</button>
  </form>

  <div id="feedback" class="muted"></div>

  <h3>Scoreboard</h3>
  <div id="scoreboard"></div>
</section>

<script src="/static/js/ws.js"></script>
<script>
  BT.init({
    code: "{{.Room.Code}}",
    userId: "{{.UserID}}"
  });
</script>
{{end}}